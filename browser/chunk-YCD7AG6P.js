import{A as S,E as k,F as D,G as q,H as A,I as $,J as P,K as G,L as R,M as L,N as J,O as z,P as H,Q as K,R as W,S as C,T as y,a as x,b as N,c as E,d as O,e as F,f as Q,g as j,h as w,i as V,j as f,k as a,l,m as g,n as p,o as n,p as o,q as v,r as c,s,t as U,u as _,v as B,w as u,x as d,z as b}from"./chunk-7VQNMIOA.js";var ie=()=>[],M=class t{constructor(i,e){this._usersQuery=i;this._userService=e;this.users$=this._usersQuery.selectAll()}users$;cols=[{key:"id",name:"Id",align:"left",type:"text"},{key:"name",name:"Name",align:"left",type:"text"},{key:"active",name:"Active",align:"left",type:"toggle"}];rows=[{id:1,name:"John Doe",age:25,email:"john@example.com"},{id:2,name:"Jane Smith",age:30,email:"jane@example.com"},{id:3,name:"Sam Brown",age:22,email:"sam@example.com"}];userToggle({id:i,value:e}){this._userService.updateUser(i,{active:e})}static \u0275fac=function(e){return new(e||t)(l(C),l(y))};static \u0275cmp=f({type:t,selectors:[["app-user-list"]],standalone:!0,features:[_],decls:6,vars:8,consts:[[1,"user-list"],[3,"cellToggled","columns","rows"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"p"),s(2),u(3,"async"),o(),n(4,"app-simple-table",1),u(5,"async"),c("cellToggled",function(re){return r.userToggle(re)}),o()()),e&2){let m;a(2),U("There are ",(m=d(3,3,r.users$))==null?null:m.length," users."),a(2),p("columns",r.cols)("rows",d(5,5,r.users$)||B(7,ie))}},dependencies:[K,S],styles:[".user-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}"]})};var ee=(t,i)=>Math.floor(Math.random()*(i-t+1))+t;var I=class t{constructor(i){this._userQuery=i}validate(i){let e=i.value;return e?E(2500).pipe(F(500),j(()=>this._userQuery.selectUserByName(e).pipe(Q(1),N(r=>r?{uniqueName:!0}:null),O(()=>x(null))))):x(null)}static \u0275fac=function(e){return new(e||t)(V(C))};static \u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"})};function ne(t,i){t&1&&(n(0,"div"),s(1," Name is already taken. "),o())}var h=class t{constructor(i,e,r){this._formBuilder=i;this._uniqueNameValidator=e;this._userService=r;this.form=this._formBuilder.group({name:["",[q.required],[this._uniqueNameValidator.validate.bind(this._uniqueNameValidator)]],active:[!1],id:ee(100,1e4)})}form;closeModal(){this._userService.toggleCreateUserModal(!1)}createUser(){this._userService.addUser(this.form.value),this.closeModal()}static \u0275fac=function(e){return new(e||t)(l(L),l(I),l(y))};static \u0275cmp=f({type:t,selectors:[["app-create-user"]],standalone:!0,features:[_],decls:16,vars:3,consts:[[1,"create-user"],[1,"create-user__form",3,"formGroup"],[1,"create-user__form-field"],["for","name"],["id","name","formControlName","name"],["for","active"],["id","active","formControlName","active"],[4,"ngIf"],[1,"create-user__actions"],["type","outlined",3,"click"],[3,"click","disabled"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),s(4," Name "),o(),v(5,"app-input",4),o(),n(6,"div",2)(7,"label",5),s(8," Active "),o(),v(9,"app-toggle",6),o(),g(10,ne,2,0,"div",7),o(),n(11,"div",8)(12,"app-button",9),c("click",function(){return r.closeModal()}),s(13," Cancel "),o(),n(14,"app-button",10),c("click",function(){return r.createUser()}),s(15," Create "),o()()()),e&2){let m;a(),p("formGroup",r.form),a(9),p("ngIf",(m=r.form.get("name"))==null?null:m.hasError("uniqueName")),a(4),p("disabled",r.form.invalid||r.form.pending)}},dependencies:[D,z,H,J,P,A,$,G,R,b],styles:[".create-user[_ngcontent-%COMP%], .create-user__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.create-user__form-field[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.create-user__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end;gap:8px}"]})};function ae(t,i){t&1&&v(0,"app-create-user")}var te=class t{constructor(i,e){this._userQuery=i;this._userService=e;this.isCreateUserModalOpen$=this._userQuery.selectIsCreateUserModalOpen()}isCreateUserModalOpen$;closeCreateUserModal(){this._userService.toggleCreateUserModal(!1)}static \u0275fac=function(e){return new(e||t)(l(C),l(y))};static \u0275cmp=f({type:t,selectors:[["app-users"]],standalone:!0,features:[_],decls:11,vars:9,consts:[["title","Create User",3,"onClose","isVisible"],[4,"ngIf"]],template:function(e,r){e&1&&(n(0,"app-container")(1,"h1"),s(2,"Users"),o(),n(3,"p"),s(4),u(5,"async"),o(),v(6,"app-user-list"),n(7,"app-modal",0),u(8,"async"),c("onClose",function(){return r.closeCreateUserModal()}),g(9,ae,1,0,"app-create-user",1),u(10,"async"),o()()),e&2&&(a(4),U("Is modal open ? ",d(5,3,r.isCreateUserModalOpen$),""),a(3),p("isVisible",!!d(8,5,r.isCreateUserModalOpen$)),a(2),p("ngIf",d(10,7,r.isCreateUserModalOpen$)))},dependencies:[k,h,M,W,S,b]})};export{te as UsersComponent};
